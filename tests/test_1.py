"""
Getriebegeometrie
m_n = 4
z = (19, 104)
x = (0.5, 0.15)
beta = 0
k = 0
α_n = 20
h_aP = 4
h_fP = 5.0
ρ_fP = 1.0
α_t = 20.0
α_wt = 21.531902292465457
u = 5.473684210526316
d = (76.0, 416.0)
d_b = (71.41663917972905, 390.9121302469379)
d_a = (88.0, 425.2)
d_f = (70.0, 407.2)
d_w = (76.77447193086583, 420.23921477947613)
b = 48.64
m_t = 4.0
β_b = 0.0
h = 9.0
a_w = 248.506843355171
p_n = 12.566370614359172
p_t = 12.566370614359172
ε_α = 1.5363235945832296
ε_β = 0.0
ε_γ = 1.5363235945832296
h_aP0 = 5.0
z_min = (12.822948255619547, 18.80699077490867)
γ = (37.87494519203679, 25.281669918722457)
d_amax = (90.47494936089821, 432.32008338495626)

Parameter
geometrie = <__main__.DIN_21771 object at 0x000001F454790740>
P = 55
n_1 = 980
verzahnungsqualität = (6, 7)
werkstoff = (Werkstoff(art=<Art.einsatzgehärteterStahl: 2>, sigma_Hlim=1500, sigma_FE=860, HB=220), Werkstoff(art=<Art.einsatzgehärteterStahl: 2>, sigma_Hlim=1500, sigma_FE=860, HB=220))
K_A = 1.75
K_S = 2.5
R_z = (5, 5)
doppelschrägverzahnt = False
innenverzahnt = False
s_pr = 0
K_V = None
K_Hbeta = None
A = Tabelle_3_2.ohneBreitenballigkeltOderEndrücknahme
f_ma = (0, 0)
bild_3_1 = None
s = (0, 0)
stützwirkung = None
bild_3_2 = None
l = None
d_sh = None
Z_LVRdyn = None
fertigungsverfahren = (<Fertigungsverfahren.geläpptGeschliffenGeschabt: 1>, <Fertigungsverfahren.geläpptGeschliffenGeschabt: 1>)
K_Fbeta = None
K_Halpha = None
K_Falpha = None
S_Hstatmin = 1.3
S_Hdynmin = (1.2, 1.5)
S_Fstatmin = 3.5
S_Fdynmin = (1.5, 2)
_assert = True

DIN 3990-11
n = (980, 179.03846153846155)
v = 3.89976368065613
F_t = 14103.41869503906
T = (535.9299104114843, 2933.5110885681243)
z_1 * v / 100 * sqrt(u^2 / (1 + u^2)) = 0.7288910289850654
F_t * K_A / b = 507.4215196611504
K_1 = 9.6
K_2 = 0.0193
K_1 = 15.3
K_2 = 0.0193
K_V = (1.0278576187783273, 1.0360454442926832)
F_m = (25368.536123904036, 25570.619703908083)
f_sh = (4.913484891366676, 4.952625290020092)
F_betax = (6.534934905517679, 6.586991635726722)
y_beta = 0.9841444905933301
F_betay = (5.550790414924349, 5.602847145133392)
c_gamma = 20
K_Hβ = (1.1064272863295082, 1.10657641007333)
K_Fβ = (1.0864854433487987, 1.0866055432520856)
Z_ε = 0.906214912960638
Y_ε = 0.7381784037193403
K_Hα = (1.0, 1.0)
K_Fα = (1.0, 1.0)
M_1 = 1.00554704549864
M_2 = 0.8835590102280203
Z_B = 1.00554704549864
Z_D = 1.0
Z_H = 2.3959406670899934
Z_E = 189.8
Z_β = 1.0
R_z100 = 3.691395287078355
Z_LVRstat = 1.0
Z_LVRdyn = 1.0
Z_W = 1.0
Z_Xstat = (1.0, 1.0)
Z_Xdyn = (1.0, 1.0)
Z_NTstat = (1.6, 1.6)
Z_NTdyn = (1.0, 1.0)
σ_HGstat = (2400.0, 2400.0)
σ_HGdyn = (1500.0, 1500.0)
σ_H0 = 875.3827378988153
σ_Hstat = (1484.2200546158076, 1481.999609403194)
σ_Hdyn = (1241.7875902772687, 1239.929832526766)
S_Hstat1 = 1.6170108957470213 >= 1.3
S_Hdyn1 = 1.2079360526264216 in (1.2, 1.5)
S_Hstat2 = 1.6194336251994612 >= 1.3
S_Hdyn2 = 1.2097458748478171 in (1.2, 1.5)

z_n = (19.0, 104.0)
E = 0.6215339440490716
G = (-0.5, -0.85)
H = (-0.8982067258510578, -1.0199780734892394)
ϑ = (48.10260415904784, 56.99835389167487)
s_Fn = (8.748743355951145, 9.239504610725831)
d_n = (76.0, 416.0)
d_bn = (71.41663917972905, 390.9121302469379)
d_an = (88.0, 425.20000000000005)
α_an = (35.75208525140492, 23.167214624042785)
y_a = (0.02077355890527524, 0.007478896430172459)
α_Fan = (34.561848000666245, 22.738705423178445)
h_Fa = (8.174657642839318, 7.834245947926714)
ρ_F = (1.3161477577049423, 1.325999192893118)
Y_Fa = (2.246336378902072, 2.1616566798058514)
L_a = (1.0702274930883136, 1.179373825144079)
q_s = (3.32361746799878, 3.48397821817927)
Y_Sa = (1.9147262565947287, 2.008781657562889)
Y_FS = (4.3011192458277225, 4.342296288342289)
Y_β = 1.0
ε_αn = 1.5363235945832296
Y_S = (2.3254914040266397, 2.439724457289684)
Y_δrelTstat = (1.1432162177717213, 1.1934787612074609)
Y_δrelTdyn = (1.0, 1.0)
Y_RrelTstat = 1.0
Y_RrelTdyn = (1.0, 1.0)
Y_Xstat = (1.0, 1.0)
Y_Xdyn = (1.0, 1.0)
Y_NTstat = (2.5, 2.5)
Y_NTdyn = (1.0, 1.0)
σ_FGstat = (2457.914868209201, 2565.979336596041)
σ_FGdyn = (860.0, 860.0)
σ_F0 = (230.15142071941582, 232.3547901900354)
σ_Fstat = (642.5553444738132, 653.9467120367831)
σ_Fdyn = (449.78874113166927, 457.7626984257481)
S_Fstat1 = 3.8252189314867198 >= 3.5
S_Fdyn1 = 1.9120087306681766 in (1.5, 2)
S_Fstat2 = 3.923835519570148 >= 3.5
S_Fdyn2 = 1.8787026617886324 in (1.5, 2)
"""

import din3990.din3990_11 as din3990_11
import din3990.din3990_5 as din3990_5

S_Hstatmin = 1.3
S_Hdyn_interval = (1.2, 1.5)
S_Fstatmin = 3.5
S_Fdyn_interval = (1.5, 2)

def test_1():
    werkstoff = din3990_5.Werkstoff(din3990_5.Werkstoff.Art.Einsatzstahl, 1500, 860, 220)

    geometrie = din3990_11.DIN_21771(m_n = 4,
                        z = (19, 104),
                        x = (0.5, 0.15),
                        bezugsprofil = din3990_11.Normalprofil1,
                        beta = 0,
                        k = 0,
                        b_d_1_verhältnis = 0.64)


    getriebe = din3990_11.DIN_3990_11(geometrie = geometrie, P = 55,
                n_1 = 980,
                verzahnungsqualität = (din3990_11.Verzahnungsqualität.DIN6, din3990_11.Verzahnungsqualität.DIN7),
                werkstoff = (werkstoff, werkstoff),
                K_A = 1.75,
                K_S = 2.5,
                R_z = (5, 5),
                s_pr = 0,

                A = din3990_11.Tabelle3_2.ohneBreitenballigkeltOderEndrücknahme,
                f_ma = (0, 0),  # Annahme, siehe Fußnote 5
                s = (0, 0),
                fertigungsverfahren = (din3990_11.Fertigungsverfahren.geläpptGeschliffenGeschabt, din3990_11.Fertigungsverfahren.geläpptGeschliffenGeschabt),

                _assert = True,
                S_Hstatmin=S_Hstatmin, S_Hdynmin=S_Hdyn_interval, S_Fstatmin=S_Fstatmin, S_Fdynmin=S_Fdyn_interval)
    
    assert abs(1.6170108957470213 - getriebe.S_Hstat[0]) < 0.00001
    assert abs(1.2079360526264216 - getriebe.S_Hdyn[0]) < 0.00001
    assert abs(1.6194336251994612 - getriebe.S_Hstat[1]) < 0.00001
    assert abs(1.2097458748478171 - getriebe.S_Hdyn[1]) < 0.00001

    assert abs(3.8252189314867198 - getriebe.S_Fstat[0]) < 0.00001
    assert abs(1.9120087306681766 - getriebe.S_Fdyn[0]) < 0.00001
    assert abs(3.923835519570148 - getriebe.S_Fstat[1]) < 0.00001
    assert abs(1.8787026617886324 - getriebe.S_Fdyn[1]) < 0.00001

